name: Generate Retro
on:
  schedule:
    # Run once a week at 00:05 AM UTC on Sunday.
    - cron: 0 0 * * 0
  # Run on demand via the GitHub UI
  workflow_dispatch:

jobs:
  generate_retro:
    runs-on: ubuntu-latest
    steps:
      - name: checkout and run
        run: npm run generate # Run the generation tool
        env: 
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN}}
      - name: create/update pull request
        uses: gr2m/create-or-update-pull-request-action@v1 # Create a PR or update the Action's existing PR
        with:
          body: >
            Here's a new weekly retro, automatically generated with
            GitHub Actions and `@retrogen/generate`.
          branch: actions/retrogen  # Custom branch *just* for this Action.
          commit-message: 'doc: generate weekly retro'
          title: 'doc: generate weekly retro'
          assignees: bnb # change to whoever you want to be assigned to this PR
